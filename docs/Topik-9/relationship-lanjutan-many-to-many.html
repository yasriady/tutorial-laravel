<!DOCTYPE html>
<html>
<head>
<title>relationship-lanjutan-many-to-many.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="relationship-lanjutan-relasi-many-to-many-di-laravel">Relationship Lanjutan: Relasi Many-to-Many di Laravel</h1>
<p>Dalam tutorial ini, kita akan mempelajari cara mengimplementasikan relasi Many-to-Many di Laravel. Kita akan menggunakan contoh hubungan antara Mahasiswa dan Mata Kuliah, di mana satu Mahasiswa dapat mengambil banyak Mata Kuliah, dan satu Mata Kuliah dapat diambil oleh banyak Mahasiswa.</p>
<h2 id="diagram-relasi-many-to-many-mahasiswa-dan-mata-kuliah">Diagram Relasi Many-to-Many (Mahasiswa dan Mata Kuliah)</h2>
<pre><code class="language-mermaid"><div class="mermaid">erDiagram
    MAHASISWA }|--|{ MATA_KULIAH : mengambil
    MAHASISWA {
        id int PK
        jurusan_id int FK
        nim varchar
        nama varchar
        email varchar
        alamat text
        created_at timestamp
        updated_at timestamp
    }
    MATA_KULIAH {
        id int PK
        kode_mk varchar
        nama_mk varchar
        sks int
        deskripsi text
        created_at timestamp
        updated_at timestamp
    }
    MAHASISWA_MATA_KULIAH {
        id int PK
        mahasiswa_id int FK
        mata_kuliah_id int FK
        nilai char
        semester int
        created_at timestamp
        updated_at timestamp
    }
    MAHASISWA ||--o{ MAHASISWA_MATA_KULIAH : has
    MATA_KULIAH ||--o{ MAHASISWA_MATA_KULIAH : has

</div></code></pre>
<h2 id="konsep-dasar-relasi-many-to-many">Konsep Dasar Relasi Many-to-Many</h2>
<p>Relasi Many-to-Many membutuhkan tabel pivot (penghubung) yang menyimpan foreign key dari kedua tabel yang berhubungan. Dalam contoh kita, tabel pivot bernama <code>mahasiswa_mata_kuliah</code> akan menyimpan <code>mahasiswa_id</code> dan <code>mata_kuliah_id</code>.</p>
<h2 id="langkah-1-membuat-migrasi-untuk-tabel-mata-kuliah">Langkah 1: Membuat Migrasi untuk Tabel Mata Kuliah</h2>
<pre class="hljs"><code><div>php artisan make:migration create_mata_kuliahs_table
</div></code></pre>
<p>Edit file migrasi yang dibuat:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">()</span>
</span>{
    Schema::create(<span class="hljs-string">'mata_kuliahs'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Blueprint $table)</span> </span>{
        $table-&gt;id();
        $table-&gt;string(<span class="hljs-string">'kode_mk'</span>)-&gt;unique();
        $table-&gt;string(<span class="hljs-string">'nama_mk'</span>);
        $table-&gt;integer(<span class="hljs-string">'sks'</span>);
        $table-&gt;text(<span class="hljs-string">'deskripsi'</span>)-&gt;nullable();
        $table-&gt;timestamps();
    });
}
</div></code></pre>
<h2 id="langkah-2-membuat-migrasi-untuk-tabel-pivot">Langkah 2: Membuat Migrasi untuk Tabel Pivot</h2>
<pre class="hljs"><code><div>php artisan make:migration create_mahasiswa_mata_kuliah_table
</div></code></pre>
<p>Edit file migrasi tabel pivot:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">()</span>
</span>{
    Schema::create(<span class="hljs-string">'mahasiswa_mata_kuliah'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Blueprint $table)</span> </span>{
        $table-&gt;id();
        $table-&gt;foreignId(<span class="hljs-string">'mahasiswa_id'</span>)-&gt;constrained()-&gt;onDelete(<span class="hljs-string">'cascade'</span>);
        $table-&gt;foreignId(<span class="hljs-string">'mata_kuliah_id'</span>)-&gt;constrained()-&gt;onDelete(<span class="hljs-string">'cascade'</span>);
        $table-&gt;char(<span class="hljs-string">'nilai'</span>, <span class="hljs-number">1</span>)-&gt;nullable();
        $table-&gt;integer(<span class="hljs-string">'semester'</span>);
        $table-&gt;timestamps();
        
        <span class="hljs-comment">// Memastikan kombinasi mahasiswa_id dan mata_kuliah_id unik</span>
        $table-&gt;unique([<span class="hljs-string">'mahasiswa_id'</span>, <span class="hljs-string">'mata_kuliah_id'</span>, <span class="hljs-string">'semester'</span>]);
    });
}
</div></code></pre>
<h2 id="langkah-3-membuat-model-mata-kuliah">Langkah 3: Membuat Model Mata Kuliah</h2>
<pre class="hljs"><code><div>php artisan make:model MataKuliah
</div></code></pre>
<p>Edit file model <code>app/Models/MataKuliah.php</code>:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Factories</span>\<span class="hljs-title">HasFactory</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Model</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MataKuliah</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span>
</span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">HasFactory</span>;
    
    <span class="hljs-keyword">protected</span> $fillable = [<span class="hljs-string">'kode_mk'</span>, <span class="hljs-string">'nama_mk'</span>, <span class="hljs-string">'sks'</span>, <span class="hljs-string">'deskripsi'</span>];
    
    <span class="hljs-comment">// Relasi Many-to-Many ke Mahasiswa</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mahasiswas</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsToMany(Mahasiswa::class, <span class="hljs-string">'mahasiswa_mata_kuliah'</span>)
                    -&gt;withPivot(<span class="hljs-string">'nilai'</span>, <span class="hljs-string">'semester'</span>)
                    -&gt;withTimestamps();
    }
}
</div></code></pre>
<h2 id="langkah-4-mengupdate-model-mahasiswa">Langkah 4: Mengupdate Model Mahasiswa</h2>
<p>Edit file <code>app/Models/Mahasiswa.php</code> untuk menambahkan relasi ke Mata Kuliah:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Factories</span>\<span class="hljs-title">HasFactory</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Model</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mahasiswa</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span>
</span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">HasFactory</span>;
    
    <span class="hljs-keyword">protected</span> $fillable = [<span class="hljs-string">'jurusan_id'</span>, <span class="hljs-string">'nim'</span>, <span class="hljs-string">'nama'</span>, <span class="hljs-string">'email'</span>, <span class="hljs-string">'alamat'</span>];
    
    <span class="hljs-comment">// Relasi ke jurusan (Many-to-One)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jurusan</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsTo(Jurusan::class);
    }
    
    <span class="hljs-comment">// Relasi Many-to-Many ke Mata Kuliah</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mataKuliahs</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsToMany(MataKuliah::class, <span class="hljs-string">'mahasiswa_mata_kuliah'</span>)
                    -&gt;withPivot(<span class="hljs-string">'nilai'</span>, <span class="hljs-string">'semester'</span>)
                    -&gt;withTimestamps();
    }
}
</div></code></pre>
<h2 id="langkah-5-membuat-seeder-untuk-mata-kuliah">Langkah 5: Membuat Seeder untuk Mata Kuliah</h2>
<pre class="hljs"><code><div>php artisan make:seeder MataKuliahSeeder
</div></code></pre>
<p>Edit file <code>database/seeders/MataKuliahSeeder.php</code>:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Database</span>\<span class="hljs-title">Seeders</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">MataKuliah</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Seeder</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MataKuliahSeeder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Seeder</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span><span class="hljs-params">()</span>
    </span>{
        $mataKuliahs = [
            [<span class="hljs-string">'kode_mk'</span> =&gt; <span class="hljs-string">'MK001'</span>, <span class="hljs-string">'nama_mk'</span> =&gt; <span class="hljs-string">'Pemrograman Web'</span>, <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">3</span>, <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Mempelajari dasar-dasar pemrograman web'</span>],
            [<span class="hljs-string">'kode_mk'</span> =&gt; <span class="hljs-string">'MK002'</span>, <span class="hljs-string">'nama_mk'</span> =&gt; <span class="hljs-string">'Basis Data'</span>, <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">4</span>, <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Mempelajari konsep dan implementasi basis data'</span>],
            [<span class="hljs-string">'kode_mk'</span> =&gt; <span class="hljs-string">'MK003'</span>, <span class="hljs-string">'nama_mk'</span> =&gt; <span class="hljs-string">'Algoritma dan Struktur Data'</span>, <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">4</span>, <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Mempelajari konsep algoritma dan struktur data'</span>],
            [<span class="hljs-string">'kode_mk'</span> =&gt; <span class="hljs-string">'MK004'</span>, <span class="hljs-string">'nama_mk'</span> =&gt; <span class="hljs-string">'Kecerdasan Buatan'</span>, <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">3</span>, <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Pengenalan konsep kecerdasan buatan'</span>],
        ];

        <span class="hljs-keyword">foreach</span> ($mataKuliahs <span class="hljs-keyword">as</span> $mk) {
            MataKuliah::create($mk);
        }
    }
}
</div></code></pre>
<p>Update file <code>database/seeders/DatabaseSeeder.php</code>:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">$this</span>-&gt;call([
        JurusanSeeder::class,
        MataKuliahSeeder::class,
        <span class="hljs-comment">// Seeder lainnya jika ada</span>
    ]);
}
</div></code></pre>
<h2 id="langkah-6-menjalankan-migrasi-dan-seeder">Langkah 6: Menjalankan Migrasi dan Seeder</h2>
<pre class="hljs"><code><div>php artisan migrate
php artisan db:seed --class=MataKuliahSeeder
</div></code></pre>
<h2 id="langkah-7-membuat-controller-untuk-mata-kuliah">Langkah 7: Membuat Controller untuk Mata Kuliah</h2>
<pre class="hljs"><code><div>php artisan make:controller MataKuliahController --resource
</div></code></pre>
<h2 id="langkah-8-membuat-controller-untuk-mengelola-krs-kartu-rencana-studi">Langkah 8: Membuat Controller untuk Mengelola KRS (Kartu Rencana Studi)</h2>
<pre class="hljs"><code><div>php artisan make:controller KrsController
</div></code></pre>
<p>Edit file <code>app/Http/Controllers/KrsController.php</code>:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Controllers</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Mahasiswa</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">MataKuliah</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Request</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">KrsController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-comment">// Menampilkan form untuk pilih mata kuliah</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">($mahasiswaId)</span>
    </span>{
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        $mataKuliahs = MataKuliah::all();
        
        <span class="hljs-comment">// Mendapatkan semester saat ini (bisa disesuaikan logic-nya)</span>
        $currentSemester = date(<span class="hljs-string">'n'</span>) &lt;= <span class="hljs-number">6</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;
        
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'krs.create'</span>, compact(<span class="hljs-string">'mahasiswa'</span>, <span class="hljs-string">'mataKuliahs'</span>, <span class="hljs-string">'currentSemester'</span>));
    }
    
    <span class="hljs-comment">// Menyimpan mata kuliah yang dipilih</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span><span class="hljs-params">(Request $request, $mahasiswaId)</span>
    </span>{
        $request-&gt;validate([
            <span class="hljs-string">'mata_kuliah_ids'</span> =&gt; <span class="hljs-string">'required|array'</span>,
            <span class="hljs-string">'mata_kuliah_ids.*'</span> =&gt; <span class="hljs-string">'exists:mata_kuliahs,id'</span>,
            <span class="hljs-string">'semester'</span> =&gt; <span class="hljs-string">'required|integer|min:1'</span>
        ]);
        
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        
        <span class="hljs-comment">// Simpan ke tabel pivot dengan semester</span>
        <span class="hljs-keyword">foreach</span> ($request-&gt;mata_kuliah_ids <span class="hljs-keyword">as</span> $mkId) {
            <span class="hljs-comment">// Periksa apakah relasi sudah ada untuk semester yang sama</span>
            <span class="hljs-keyword">if</span> (!$mahasiswa-&gt;mataKuliahs()-&gt;wherePivot(<span class="hljs-string">'semester'</span>, $request-&gt;semester)-&gt;wherePivot(<span class="hljs-string">'mata_kuliah_id'</span>, $mkId)-&gt;exists()) {
                $mahasiswa-&gt;mataKuliahs()-&gt;attach($mkId, [
                    <span class="hljs-string">'semester'</span> =&gt; $request-&gt;semester
                ]);
            }
        }
        
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'mahasiswas.show'</span>, $mahasiswa-&gt;id)
            -&gt;with(<span class="hljs-string">'success'</span>, <span class="hljs-string">'Mata kuliah berhasil ditambahkan ke KRS'</span>);
    }
    
    <span class="hljs-comment">// Menampilkan KRS mahasiswa</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">($mahasiswaId, $semester = null)</span>
    </span>{
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        
        <span class="hljs-comment">// Jika semester tidak ditentukan, ambil semester terbaru</span>
        <span class="hljs-keyword">if</span> (!$semester) {
            $latestKrs = $mahasiswa-&gt;mataKuliahs()
                        -&gt;orderByPivot(<span class="hljs-string">'semester'</span>, <span class="hljs-string">'desc'</span>)
                        -&gt;first();
            $semester = $latestKrs ? $latestKrs-&gt;pivot-&gt;semester : <span class="hljs-number">1</span>;
        }
        
        $mataKuliahs = $mahasiswa-&gt;mataKuliahs()
                      -&gt;wherePivot(<span class="hljs-string">'semester'</span>, $semester)
                      -&gt;get();
        
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'krs.show'</span>, compact(<span class="hljs-string">'mahasiswa'</span>, <span class="hljs-string">'mataKuliahs'</span>, <span class="hljs-string">'semester'</span>));
    }
    
    <span class="hljs-comment">// Menghapus mata kuliah dari KRS</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span><span class="hljs-params">($mahasiswaId, $mataKuliahId, $semester)</span>
    </span>{
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        
        $mahasiswa-&gt;mataKuliahs()-&gt;wherePivot(<span class="hljs-string">'semester'</span>, $semester)-&gt;detach($mataKuliahId);
        
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'krs.show'</span>, [$mahasiswaId, $semester])
            -&gt;with(<span class="hljs-string">'success'</span>, <span class="hljs-string">'Mata kuliah berhasil dihapus dari KRS'</span>);
    }
    
    <span class="hljs-comment">// Input nilai untuk mata kuliah</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inputNilai</span><span class="hljs-params">($mahasiswaId, $mataKuliahId, $semester)</span>
    </span>{
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        $mataKuliah = MataKuliah::findOrFail($mataKuliahId);
        
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'krs.input_nilai'</span>, compact(<span class="hljs-string">'mahasiswa'</span>, <span class="hljs-string">'mataKuliah'</span>, <span class="hljs-string">'semester'</span>));
    }
    
    <span class="hljs-comment">// Menyimpan nilai mata kuliah</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">storeNilai</span><span class="hljs-params">(Request $request, $mahasiswaId, $mataKuliahId, $semester)</span>
    </span>{
        $request-&gt;validate([
            <span class="hljs-string">'nilai'</span> =&gt; <span class="hljs-string">'required|in:A,B,C,D,E'</span>
        ]);
        
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        
        $mahasiswa-&gt;mataKuliahs()-&gt;updateExistingPivot($mataKuliahId, [
            <span class="hljs-string">'nilai'</span> =&gt; $request-&gt;nilai
        ]);
        
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'krs.show'</span>, [$mahasiswaId, $semester])
            -&gt;with(<span class="hljs-string">'success'</span>, <span class="hljs-string">'Nilai berhasil disimpan'</span>);
    }
}
</div></code></pre>
<h2 id="langkah-9-membuat-view-untuk-krs">Langkah 9: Membuat View untuk KRS</h2>
<p>Buat direktori dan file view untuk KRS:</p>
<pre class="hljs"><code><div>mkdir -p resources/views/krs
</div></code></pre>
<h3 id="file-resourcesviewskrscreatebladephp">File: resources/views/krs/create.blade.php</h3>
<pre class="hljs"><code><div>@extends('layouts.app')

@section('content')
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Tambah Mata Kuliah ke KRS - {{ $mahasiswa-&gt;nama }} (Semester {{ $currentSemester }})<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"{{ route('krs.store', $mahasiswa-&gt;id) }}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>&gt;</span>
        @csrf
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"semester"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ $currentSemester }}"</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>NIM:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {{ $mahasiswa-&gt;nim }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Jurusan:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {{ $mahasiswa-&gt;jurusan-&gt;nama_jurusan }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Pilih Mata Kuliah<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
                @foreach ($mataKuliahs as $mk)
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card mb-2 p-2"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-input"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mata_kuliah_ids[]"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ $mk-&gt;id }}"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mk-{{ $mk-&gt;id }}"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-label"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"mk-{{ $mk-&gt;id }}"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{{ $mk-&gt;kode_mk }} - {{ $mk-&gt;nama_mk }}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> ({{ $mk-&gt;sks }} SKS)
                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted small"</span>&gt;</span>{{ $mk-&gt;deskripsi }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                @endforeach
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>Simpan KRS<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('mahasiswas.show', $mahasiswa-&gt;id) }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span>&gt;</span>Kembali<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
@endsection
</div></code></pre>
<h3 id="file-resourcesviewskrsshowbladephp">File: resources/views/krs/show.blade.php</h3>
<pre class="hljs"><code><div>@extends('layouts.app')

@section('content')
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Kartu Rencana Studi (KRS)<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>{{ $mahasiswa-&gt;nama }} ({{ $mahasiswa-&gt;nim }})<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Jurusan: {{ $mahasiswa-&gt;jurusan-&gt;nama_jurusan }} | Semester: {{ $semester }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    
    @if (session('success'))
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-success"</span>&gt;</span>
            {{ session('success') }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    @endif
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('krs.create', $mahasiswa-&gt;id) }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>Tambah Mata Kuliah<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('mahasiswas.show', $mahasiswa-&gt;id) }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span>&gt;</span>Kembali ke Profil<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-0"</span>&gt;</span>Daftar Mata Kuliah<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6 text-right"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"{{ route('krs.show', $mahasiswa-&gt;id) }}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"GET"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-inline justify-content-end"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"semester"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mr-2"</span>&gt;</span>Pilih Semester:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"semester"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"semester"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control form-control-sm mr-2"</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">"this.form.submit()"</span>&gt;</span>
                                @for ($i = 1; $i <span class="hljs-tag">&lt;<span class="hljs-name">=</span> <span class="hljs-attr">8</span>; $<span class="hljs-attr">i</span>++)
                                    &lt;<span class="hljs-attr">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ $i }}"</span> {{ $<span class="hljs-attr">semester</span> == <span class="hljs-string">$i</span> ? '<span class="hljs-attr">selected</span>' <span class="hljs-attr">:</span> '' }}&gt;</span>Semester {{ $i }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                                @endfor
                            <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
            @if ($mataKuliahs-&gt;count() &gt; 0)
                <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>No<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Kode<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Mata Kuliah<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>SKS<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Nilai<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Aksi<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
                        @php $totalSks = 0; @endphp
                        @foreach ($mataKuliahs as $i =&gt; $mk)
                        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{{ $i + 1 }}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{{ $mk-&gt;kode_mk }}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{{ $mk-&gt;nama_mk }}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{{ $mk-&gt;sks }}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
                                @if ($mk-&gt;pivot-&gt;nilai)
                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge badge-{{ $mk-&gt;pivot-&gt;nilai == 'A' || $mk-&gt;pivot-&gt;nilai == 'B' ? 'success' : ($mk-&gt;pivot-&gt;nilai == 'C' ? 'warning' : 'danger') }}"</span>&gt;</span>
                                        {{ $mk-&gt;pivot-&gt;nilai }}
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                @else
                                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('krs.input-nilai', [$mahasiswa-&gt;id, $mk-&gt;id, $semester]) }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-outline-primary"</span>&gt;</span>Input Nilai<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                @endif
                            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"{{ route('krs.destroy', [$mahasiswa-&gt;id, $mk-&gt;id, $semester]) }}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-inline"</span>&gt;</span>
                                    @csrf
                                    @method('DELETE')
                                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-danger"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"return confirm('Yakin ingin menghapus mata kuliah ini dari KRS?')"</span>&gt;</span>Hapus<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
                        @php $totalSks += $mk-&gt;sks; @endphp
                        @endforeach
                        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">"3"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-right"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Total SKS:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{{ $totalSks }}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">"2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
            @else
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-info"</span>&gt;</span>
                    Belum ada mata kuliah yang diambil pada semester {{ $semester }}.
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            @endif
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
@endsection
</div></code></pre>
<h3 id="file-resourcesviewskrsinputnilaibladephp">File: resources/views/krs/input_nilai.blade.php</h3>
<pre class="hljs"><code><div>@extends('layouts.app')

@section('content')
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Input Nilai Mata Kuliah<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>{{ $mahasiswa-&gt;nama }} ({{ $mahasiswa-&gt;nim }})<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Mata Kuliah: {{ $mataKuliah-&gt;kode_mk }} - {{ $mataKuliah-&gt;nama_mk }} | Semester: {{ $semester }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"{{ route('krs.store-nilai', [$mahasiswa-&gt;id, $mataKuliah-&gt;id, $semester]) }}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>&gt;</span>
        @csrf
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"nilai"</span>&gt;</span>Nilai<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"nilai"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nilai"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control @error('nilai') is-invalid @enderror"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>&gt;</span>-- Pilih Nilai --<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"A"</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"B"</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"C"</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"D"</span>&gt;</span>D<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"E"</span>&gt;</span>E<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
            @error('nilai')
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"invalid-feedback"</span>&gt;</span>{{ $message }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            @enderror
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>Simpan Nilai<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('krs.show', [$mahasiswa-&gt;id, $semester]) }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span>&gt;</span>Kembali<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
@endsection
</div></code></pre>
<h2 id="langkah-10-mengupdate-view-mahasiswa-untuk-menampilkan-krs">Langkah 10: Mengupdate View Mahasiswa untuk Menampilkan KRS</h2>
<p>Edit file <code>resources/views/mahasiswas/show.blade.php</code>:</p>
<pre class="hljs"><code><div>@extends('layouts.app')

@section('content')
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Detail Mahasiswa<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    
    @if (session('success'))
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-success"</span>&gt;</span>
            {{ session('success') }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    @endif
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card mb-4"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-0"</span>&gt;</span>Informasi Mahasiswa<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>NIM:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {{ $mahasiswa-&gt;nim }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Nama:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {{ $mahasiswa-&gt;nama }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Email:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {{ $mahasiswa-&gt;email }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Jurusan:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {{ $mahasiswa-&gt;jurusan-&gt;nama_jurusan }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Alamat:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ $mahasiswa-&gt;alamat ?: '-' }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-footer"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('mahasiswas.edit', $mahasiswa-&gt;id) }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-warning"</span>&gt;</span>Edit<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('mahasiswas.index') }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span>&gt;</span>Kembali<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-0"</span>&gt;</span>Kartu Rencana Studi (KRS)<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('krs.show', $mahasiswa-&gt;id) }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>Lihat KRS<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ route('krs.create', $mahasiswa-&gt;id) }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-success"</span>&gt;</span>Tambah Mata Kuliah<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
@endsection
</div></code></pre>
<h2 id="langkah-11-menambahkan-rute-untuk-krs">Langkah 11: Menambahkan Rute untuk KRS</h2>
<p>Edit file <code>routes/web.php</code>:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Rute untuk KRS (Kartu Rencana Studi)</span>
Route::get(<span class="hljs-string">'mahasiswas/{mahasiswa}/krs/create'</span>, [KrsController::class, <span class="hljs-string">'create'</span>])-&gt;name(<span class="hljs-string">'krs.create'</span>);
Route::post(<span class="hljs-string">'mahasiswas/{mahasiswa}/krs'</span>, [KrsController::class, <span class="hljs-string">'store'</span>])-&gt;name(<span class="hljs-string">'krs.store'</span>);
Route::get(<span class="hljs-string">'mahasiswas/{mahasiswa}/krs/{semester?}'</span>, [KrsController::class, <span class="hljs-string">'show'</span>])-&gt;name(<span class="hljs-string">'krs.show'</span>);
Route::delete(<span class="hljs-string">'mahasiswas/{mahasiswa}/krs/{mataKuliah}/{semester}'</span>, [KrsController::class, <span class="hljs-string">'destroy'</span>])-&gt;name(<span class="hljs-string">'krs.destroy'</span>);
Route::get(<span class="hljs-string">'mahasiswas/{mahasiswa}/krs/{mataKuliah}/{semester}/nilai'</span>, [KrsController::class, <span class="hljs-string">'inputNilai'</span>])-&gt;name(<span class="hljs-string">'krs.input-nilai'</span>);
Route::post(<span class="hljs-string">'mahasiswas/{mahasiswa}/krs/{mataKuliah}/{semester}/nilai'</span>, [KrsController::class, <span class="hljs-string">'storeNilai'</span>])-&gt;name(<span class="hljs-string">'krs.store-nilai'</span>);
</div></code></pre>
<h2 id="flowchart-implementasi-relasi-many-to-many">Flowchart Implementasi Relasi Many-to-Many</h2>
<pre><code class="language-mermaid"><div class="mermaid">flowchart TB
    A[Start] --> B[Membuat Migrasi Tabel Mata Kuliah]
    B --> C[Membuat Migrasi Tabel Pivot]
    C --> D[Membuat Model MataKuliah]
    D --> E[Mengupdate Model Mahasiswa]
    E --> F[Membuat Seeder MataKuliah]
    F --> G[Menjalankan Migrasi dan Seeder]
    G --> H[Membuat Controller MataKuliah]
    H --> I[Membuat Controller KRS]
    I --> J[Membuat View untuk KRS]
    J --> K[Mengupdate View Mahasiswa]
    K --> L[Menambahkan Rute KRS]
    L --> M[Pengujian CRUD dengan Relasi Many-to-Many]
    M --> N[End]

</div></code></pre>
<h2 id="implementasi-query-dan-penggunaan-relasi">Implementasi Query dan Penggunaan Relasi</h2>
<p>Berikut adalah contoh penggunaan relasi Many-to-Many di controller:</p>
<h3 id="menambahkan-data-ke-tabel-pivot-attach">Menambahkan Data ke Tabel Pivot (Attach)</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Menambahkan mata kuliah ke mahasiswa</span>
$mahasiswa = Mahasiswa::find(<span class="hljs-number">1</span>);
$mahasiswa-&gt;mataKuliahs()-&gt;attach(<span class="hljs-number">1</span>, [<span class="hljs-string">'semester'</span> =&gt; <span class="hljs-number">1</span>]); <span class="hljs-comment">// Menambahkan mata kuliah dengan ID 1</span>

<span class="hljs-comment">// Menambahkan beberapa mata kuliah sekaligus</span>
$mahasiswa-&gt;mataKuliahs()-&gt;attach([
    <span class="hljs-number">1</span> =&gt; [<span class="hljs-string">'semester'</span> =&gt; <span class="hljs-number">1</span>], 
    <span class="hljs-number">2</span> =&gt; [<span class="hljs-string">'semester'</span> =&gt; <span class="hljs-number">1</span>]
]);
</div></code></pre>
<h3 id="menghapus-data-dari-tabel-pivot-detach">Menghapus Data dari Tabel Pivot (Detach)</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Menghapus mata kuliah dari mahasiswa</span>
$mahasiswa-&gt;mataKuliahs()-&gt;detach(<span class="hljs-number">1</span>); <span class="hljs-comment">// Menghapus mata kuliah dengan ID 1</span>

<span class="hljs-comment">// Menghapus semua mata kuliah dari mahasiswa</span>
$mahasiswa-&gt;mataKuliahs()-&gt;detach();
</div></code></pre>
<h3 id="sinkronisasi-data-sync">Sinkronisasi Data (Sync)</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Mengatur mata kuliah mahasiswa menjadi hanya yang disebutkan</span>
$mahasiswa-&gt;mataKuliahs()-&gt;sync([
    <span class="hljs-number">1</span> =&gt; [<span class="hljs-string">'semester'</span> =&gt; <span class="hljs-number">1</span>], 
    <span class="hljs-number">3</span> =&gt; [<span class="hljs-string">'semester'</span> =&gt; <span class="hljs-number">1</span>]
]); <span class="hljs-comment">// Hanya akan ada mata kuliah ID 1 dan 3</span>
</div></code></pre>
<h3 id="mengupdate-data-di-tabel-pivot">Mengupdate Data di Tabel Pivot</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Mengupdate nilai di tabel pivot</span>
$mahasiswa-&gt;mataKuliahs()-&gt;updateExistingPivot(<span class="hljs-number">1</span>, [<span class="hljs-string">'nilai'</span> =&gt; <span class="hljs-string">'A'</span>]);
</div></code></pre>
<h3 id="query-data-dengan-kondisi-di-tabel-pivot">Query Data dengan Kondisi di Tabel Pivot</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Mencari mahasiswa yang mengambil mata kuliah tertentu</span>
$mahasiswaMk1 = Mahasiswa::whereHas(<span class="hljs-string">'mataKuliahs'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($query)</span> </span>{
    $query-&gt;where(<span class="hljs-string">'mata_kuliah_id'</span>, <span class="hljs-number">1</span>);
})-&gt;get();

<span class="hljs-comment">// Mencari mahasiswa dengan nilai A pada mata kuliah tertentu</span>
$mahasiswaNilaiA = Mahasiswa::whereHas(<span class="hljs-string">'mataKuliahs'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($query)</span> </span>{
    $query-&gt;where(<span class="hljs-string">'mata_kuliah_id'</span>, <span class="hljs-number">1</span>)
          -&gt;where(<span class="hljs-string">'nilai'</span>, <span class="hljs-string">'A'</span>);
})-&gt;get();

<span class="hljs-comment">// Mencari mata kuliah yang diambil oleh mahasiswa tertentu pada semester tertentu</span>
$mataKuliahSemester1 = MataKuliah::whereHas(<span class="hljs-string">'mahasiswas'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($query)</span> <span class="hljs-title">use</span> <span class="hljs-params">($mahasiswaId)</span> </span>{
    $query-&gt;where(<span class="hljs-string">'mahasiswa_id'</span>, $mahasiswaId)
          -&gt;where(<span class="hljs-string">'semester'</span>, <span class="hljs-number">1</span>);
})-&gt;get();
</div></code></pre>
<h3 id="eager-loading-untuk-optimasi-query">Eager Loading untuk Optimasi Query</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// Load mahasiswa beserta mata kuliah yang diambil</span>
$mahasiswas = Mahasiswa::with(<span class="hljs-string">'mataKuliahs'</span>)-&gt;get();

<span class="hljs-comment">// Load mata kuliah beserta mahasiswa yang mengambil</span>
$mataKuliahs = MataKuliah::with(<span class="hljs-string">'mahasiswas'</span>)-&gt;get();

<span class="hljs-comment">// Load mahasiswa dengan mata kuliah dan jurusan</span>
$mahasiswas = Mahasiswa::with([<span class="hljs-string">'mataKuliahs'</span>, <span class="hljs-string">'jurusan'</span>])-&gt;get();
</div></code></pre>
<h2 id="kesimpulan">Kesimpulan</h2>
<p>Dalam tutorial ini, kita telah mempelajari:</p>
<ol>
<li>Konsep relasi Many-to-Many di Laravel</li>
<li>Cara membuat tabel pivot untuk menghubungkan dua tabel</li>
<li>Implementasi relasi di model Laravel menggunakan <code>belongsToMany()</code></li>
<li>Menyimpan data tambahan di tabel pivot menggunakan <code>withPivot()</code></li>
<li>Berbagai metode untuk mengelola data relasi: <code>attach()</code>, <code>detach()</code>, <code>sync()</code>, dan <code>updateExistingPivot()</code></li>
<li>Melakukan query dengan kondisi di tabel pivot</li>
<li>Optimasi query menggunakan eager loading</li>
</ol>
<p>Dengan implementasi relasi Many-to-Many ini, aplikasi manajemen data Mahasiswa kita sekarang dapat mengelola KRS dengan lebih efisien, memungkinkan mahasiswa untuk mengambil banyak mata kuliah dan mata kuliah dapat diambil oleh banyak mahasiswa.</p>

</body>
</html>
