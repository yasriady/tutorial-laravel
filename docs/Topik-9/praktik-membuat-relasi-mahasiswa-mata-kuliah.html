<!DOCTYPE html>
<html>
<head>
<title>praktik-membuat-relasi-mahasiswa-mata-kuliah.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="praktik-membuat-relasi-mahasiswa-mata-kuliah">Praktik: Membuat relasi Mahasiswa-Mata Kuliah</h1>
<p>Pada bagian ini, kita akan mempraktikkan cara membuat dan mengelola relasi Many-to-Many antara Mahasiswa dan Mata Kuliah. Kita akan melalui langkah demi langkah mulai dari pembuatan migrasi, model, hingga implementasi CRUD untuk relasi tersebut.</p>
<h2 id="1-persiapan-database">1. Persiapan Database</h2>
<h3 id="membuat-migrasi-untuk-tabel-mata-kuliah">Membuat Migrasi untuk Tabel Mata Kuliah</h3>
<p>Pertama, kita perlu membuat tabel Mata Kuliah:</p>
<pre class="hljs"><code><div>php artisan make:migration create_mata_kuliahs_table --create=mata_kuliahs
</div></code></pre>
<p>Kemudian, isi file migrasi tersebut:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">Migration</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Blueprint</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Schema</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateMataKuliahsTable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Migration</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">()</span>
    </span>{
        Schema::create(<span class="hljs-string">'mata_kuliahs'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Blueprint $table)</span> </span>{
            $table-&gt;id();
            $table-&gt;string(<span class="hljs-string">'kode'</span>)-&gt;unique();
            $table-&gt;string(<span class="hljs-string">'nama'</span>);
            $table-&gt;integer(<span class="hljs-string">'sks'</span>);
            $table-&gt;string(<span class="hljs-string">'semester'</span>);
            $table-&gt;text(<span class="hljs-string">'deskripsi'</span>)-&gt;nullable();
            $table-&gt;foreignId(<span class="hljs-string">'jurusan_id'</span>)-&gt;constrained(<span class="hljs-string">'jurusans'</span>)-&gt;onDelete(<span class="hljs-string">'cascade'</span>);
            $table-&gt;timestamps();
        });
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">down</span><span class="hljs-params">()</span>
    </span>{
        Schema::dropIfExists(<span class="hljs-string">'mata_kuliahs'</span>);
    }
}
</div></code></pre>
<h3 id="membuat-migrasi-untuk-tabel-pivot-mahasiswa-mata-kuliah">Membuat Migrasi untuk Tabel Pivot Mahasiswa-Mata Kuliah</h3>
<p>Selanjutnya, kita perlu membuat tabel pivot untuk relasi Many-to-Many:</p>
<pre class="hljs"><code><div>php artisan make:migration create_mahasiswa_mata_kuliah_table
</div></code></pre>
<p>Isi file migrasi tabel pivot:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">Migration</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Blueprint</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Schema</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateMahasiswaMataKuliahTable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Migration</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">()</span>
    </span>{
        Schema::create(<span class="hljs-string">'mahasiswa_mata_kuliah'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Blueprint $table)</span> </span>{
            $table-&gt;id();
            $table-&gt;foreignId(<span class="hljs-string">'mahasiswa_id'</span>)-&gt;constrained()-&gt;onDelete(<span class="hljs-string">'cascade'</span>);
            $table-&gt;foreignId(<span class="hljs-string">'mata_kuliah_id'</span>)-&gt;constrained(<span class="hljs-string">'mata_kuliahs'</span>)-&gt;onDelete(<span class="hljs-string">'cascade'</span>);
            $table-&gt;string(<span class="hljs-string">'semester_ambil'</span>);
            $table-&gt;integer(<span class="hljs-string">'nilai'</span>)-&gt;nullable();
            $table-&gt;string(<span class="hljs-string">'status'</span>)-&gt;default(<span class="hljs-string">'aktif'</span>); <span class="hljs-comment">// aktif, selesai, mengulang</span>
            $table-&gt;timestamps();

            <span class="hljs-comment">// Unique untuk mencegah mahasiswa mengambil mata kuliah yang sama pada semester yang sama</span>
            $table-&gt;unique([<span class="hljs-string">'mahasiswa_id'</span>, <span class="hljs-string">'mata_kuliah_id'</span>, <span class="hljs-string">'semester_ambil'</span>]);
        });
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">down</span><span class="hljs-params">()</span>
    </span>{
        Schema::dropIfExists(<span class="hljs-string">'mahasiswa_mata_kuliah'</span>);
    }
}
</div></code></pre>
<h3 id="menjalankan-migrasi">Menjalankan Migrasi</h3>
<pre class="hljs"><code><div>php artisan migrate
</div></code></pre>
<h2 id="2-membuat-model-matakuliah">2. Membuat Model MataKuliah</h2>
<p>Kita perlu membuat model untuk MataKuliah:</p>
<pre class="hljs"><code><div>php artisan make:model MataKuliah
</div></code></pre>
<p>Kemudian, isi model tersebut:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Factories</span>\<span class="hljs-title">HasFactory</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Model</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MataKuliah</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span>
</span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">HasFactory</span>;

    <span class="hljs-keyword">protected</span> $fillable = [
        <span class="hljs-string">'kode'</span>,
        <span class="hljs-string">'nama'</span>,
        <span class="hljs-string">'sks'</span>,
        <span class="hljs-string">'semester'</span>,
        <span class="hljs-string">'deskripsi'</span>,
        <span class="hljs-string">'jurusan_id'</span>
    ];

    <span class="hljs-comment">/**
     * Relasi ke jurusan
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jurusan</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsTo(Jurusan::class);
    }

    <span class="hljs-comment">/**
     * Relasi ke mahasiswa
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mahasiswas</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsToMany(Mahasiswa::class, <span class="hljs-string">'mahasiswa_mata_kuliah'</span>)
                    -&gt;withPivot(<span class="hljs-string">'semester_ambil'</span>, <span class="hljs-string">'nilai'</span>, <span class="hljs-string">'status'</span>)
                    -&gt;withTimestamps();
    }
}
</div></code></pre>
<h2 id="3-memperbarui-model-mahasiswa">3. Memperbarui Model Mahasiswa</h2>
<p>Selanjutnya, kita perlu memperbarui model Mahasiswa untuk menambahkan relasi dengan MataKuliah:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Factories</span>\<span class="hljs-title">HasFactory</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Model</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mahasiswa</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span>
</span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">HasFactory</span>;

    <span class="hljs-keyword">protected</span> $fillable = [
        <span class="hljs-string">'nim'</span>,
        <span class="hljs-string">'nama'</span>,
        <span class="hljs-string">'email'</span>,
        <span class="hljs-string">'tanggal_lahir'</span>,
        <span class="hljs-string">'alamat'</span>,
        <span class="hljs-string">'jurusan_id'</span>
    ];

    <span class="hljs-comment">// Relasi ke jurusan</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jurusan</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsTo(Jurusan::class);
    }

    <span class="hljs-comment">// Tambahkan relasi ke mata kuliah</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mataKuliahs</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsToMany(MataKuliah::class, <span class="hljs-string">'mahasiswa_mata_kuliah'</span>)
                    -&gt;withPivot(<span class="hljs-string">'semester_ambil'</span>, <span class="hljs-string">'nilai'</span>, <span class="hljs-string">'status'</span>)
                    -&gt;withTimestamps();
    }
    
    <span class="hljs-comment">// Menghitung IPK</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hitungIPK</span><span class="hljs-params">()</span>
    </span>{
        $mataKuliahs = <span class="hljs-keyword">$this</span>-&gt;mataKuliahs()
                            -&gt;wherePivot(<span class="hljs-string">'status'</span>, <span class="hljs-string">'selesai'</span>)
                            -&gt;wherePivot(<span class="hljs-string">'nilai'</span>, <span class="hljs-string">'&gt;='</span>, <span class="hljs-number">0</span>)
                            -&gt;get();
        
        <span class="hljs-keyword">if</span> ($mataKuliahs-&gt;isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
        
        $totalNilai = <span class="hljs-number">0</span>;
        $totalSKS = <span class="hljs-number">0</span>;
        
        <span class="hljs-keyword">foreach</span> ($mataKuliahs <span class="hljs-keyword">as</span> $mk) {
            <span class="hljs-comment">// Konversi nilai angka ke bobot</span>
            $bobot = <span class="hljs-keyword">$this</span>-&gt;konversiNilaiKeBobot($mk-&gt;pivot-&gt;nilai);
            $totalNilai += ($bobot * $mk-&gt;sks);
            $totalSKS += $mk-&gt;sks;
        }
        
        <span class="hljs-keyword">return</span> $totalSKS &gt; <span class="hljs-number">0</span> ? round($totalNilai / $totalSKS, <span class="hljs-number">2</span>) : <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-comment">// Helper untuk konversi nilai ke bobot</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">konversiNilaiKeBobot</span><span class="hljs-params">($nilai)</span>
    </span>{
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">85</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">4.0</span>;
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">80</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">3.7</span>;
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">75</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">3.3</span>;
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">70</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">3.0</span>;
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">65</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2.7</span>;
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">60</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2.3</span>;
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">55</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2.0</span>;
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">50</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1.7</span>;
        <span class="hljs-keyword">if</span> ($nilai &gt;= <span class="hljs-number">40</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
}
</div></code></pre>
<h2 id="4-membuat-seed-untuk-data-dummy">4. Membuat Seed untuk Data Dummy</h2>
<p>Untuk mempermudah pengujian, kita buat seed untuk data dummy:</p>
<pre class="hljs"><code><div>php artisan make:seeder MataKuliahSeeder
</div></code></pre>
<p>Isi file seeder:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Database</span>\<span class="hljs-title">Seeders</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Seeder</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">MataKuliah</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MataKuliahSeeder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Seeder</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// Asumsi jurusan_id 1 adalah Teknik Informatika</span>
        $mataKuliahs = [
            [
                <span class="hljs-string">'kode'</span> =&gt; <span class="hljs-string">'IF101'</span>,
                <span class="hljs-string">'nama'</span> =&gt; <span class="hljs-string">'Algoritma dan Pemrograman'</span>,
                <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">4</span>,
                <span class="hljs-string">'semester'</span> =&gt; <span class="hljs-string">'Ganjil'</span>,
                <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Mata kuliah dasar pemrograman'</span>,
                <span class="hljs-string">'jurusan_id'</span> =&gt; <span class="hljs-number">1</span>
            ],
            [
                <span class="hljs-string">'kode'</span> =&gt; <span class="hljs-string">'IF102'</span>,
                <span class="hljs-string">'nama'</span> =&gt; <span class="hljs-string">'Struktur Data'</span>,
                <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">3</span>,
                <span class="hljs-string">'semester'</span> =&gt; <span class="hljs-string">'Genap'</span>,
                <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Pengenalan struktur data dasar'</span>,
                <span class="hljs-string">'jurusan_id'</span> =&gt; <span class="hljs-number">1</span>
            ],
            [
                <span class="hljs-string">'kode'</span> =&gt; <span class="hljs-string">'IF201'</span>,
                <span class="hljs-string">'nama'</span> =&gt; <span class="hljs-string">'Basis Data'</span>,
                <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">3</span>,
                <span class="hljs-string">'semester'</span> =&gt; <span class="hljs-string">'Ganjil'</span>,
                <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Pengenalan database relasional'</span>,
                <span class="hljs-string">'jurusan_id'</span> =&gt; <span class="hljs-number">1</span>
            ],
            [
                <span class="hljs-string">'kode'</span> =&gt; <span class="hljs-string">'IF202'</span>,
                <span class="hljs-string">'nama'</span> =&gt; <span class="hljs-string">'Pemrograman Web'</span>,
                <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">4</span>,
                <span class="hljs-string">'semester'</span> =&gt; <span class="hljs-string">'Genap'</span>,
                <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Pembuatan aplikasi berbasis web'</span>,
                <span class="hljs-string">'jurusan_id'</span> =&gt; <span class="hljs-number">1</span>
            ],
            [
                <span class="hljs-string">'kode'</span> =&gt; <span class="hljs-string">'IF301'</span>,
                <span class="hljs-string">'nama'</span> =&gt; <span class="hljs-string">'Framework Laravel'</span>,
                <span class="hljs-string">'sks'</span> =&gt; <span class="hljs-number">3</span>,
                <span class="hljs-string">'semester'</span> =&gt; <span class="hljs-string">'Ganjil'</span>,
                <span class="hljs-string">'deskripsi'</span> =&gt; <span class="hljs-string">'Pengembangan web menggunakan Laravel'</span>,
                <span class="hljs-string">'jurusan_id'</span> =&gt; <span class="hljs-number">1</span>
            ],
        ];

        <span class="hljs-keyword">foreach</span> ($mataKuliahs <span class="hljs-keyword">as</span> $mk) {
            MataKuliah::create($mk);
        }
    }
}
</div></code></pre>
<p>Kemudian, tambahkan seeder ini ke database seeder:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Database</span>\<span class="hljs-title">Seeders</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Seeder</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DatabaseSeeder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Seeder</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;call([
            <span class="hljs-comment">// Seeder lainnya...</span>
            MataKuliahSeeder::class,
        ]);
    }
}
</div></code></pre>
<p>Jalankan seeder:</p>
<pre class="hljs"><code><div>php artisan db:seed --class=MataKuliahSeeder
</div></code></pre>
<h2 id="5-membuat-controller-untuk-manajemen-relasi">5. Membuat Controller untuk Manajemen Relasi</h2>
<h3 id="membuat-matakuliahcontroller">Membuat MataKuliahController</h3>
<pre class="hljs"><code><div>php artisan make:controller MataKuliahController --resource
</div></code></pre>
<h3 id="membuat-mahasiswamatakuliahcontroller">Membuat MahasiswaMataKuliahController</h3>
<pre class="hljs"><code><div>php artisan make:controller MahasiswaMataKuliahController
</div></code></pre>
<p>Isi MahasiswaMataKuliahController:</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Controllers</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Mahasiswa</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">MataKuliah</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Validator</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MahasiswaMataKuliahController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-comment">/**
     * Menampilkan mata kuliah yang diambil oleh mahasiswa
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span><span class="hljs-params">($mahasiswaId)</span>
    </span>{
        $mahasiswa = Mahasiswa::with([<span class="hljs-string">'mataKuliahs'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($query)</span> </span>{
            $query-&gt;orderBy(<span class="hljs-string">'semester'</span>);
        }])-&gt;findOrFail($mahasiswaId);
        
        $ipk = $mahasiswa-&gt;hitungIPK();
        
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'mahasiswa_matakuliah.index'</span>, compact(<span class="hljs-string">'mahasiswa'</span>, <span class="hljs-string">'ipk'</span>));
    }
    
    <span class="hljs-comment">/**
     * Menampilkan form untuk menambah mata kuliah pada mahasiswa
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">($mahasiswaId)</span>
    </span>{
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        $mataKuliahs = MataKuliah::where(<span class="hljs-string">'jurusan_id'</span>, $mahasiswa-&gt;jurusan_id)
                                 -&gt;orderBy(<span class="hljs-string">'semester'</span>)
                                 -&gt;orderBy(<span class="hljs-string">'nama'</span>)
                                 -&gt;get();
        
        <span class="hljs-comment">// Daftar semester untuk dropdown</span>
        $semesterOptions = [
            <span class="hljs-string">'Ganjil 2022/2023'</span>,
            <span class="hljs-string">'Genap 2022/2023'</span>,
            <span class="hljs-string">'Ganjil 2023/2024'</span>,
            <span class="hljs-string">'Genap 2023/2024'</span>,
            <span class="hljs-string">'Ganjil 2024/2025'</span>,
            <span class="hljs-string">'Genap 2024/2025'</span>,
        ];
        
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'mahasiswa_matakuliah.create'</span>, compact(<span class="hljs-string">'mahasiswa'</span>, <span class="hljs-string">'mataKuliahs'</span>, <span class="hljs-string">'semesterOptions'</span>));
    }
    
    <span class="hljs-comment">/**
     * Menyimpan relasi mata kuliah yang diambil mahasiswa
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span><span class="hljs-params">(Request $request, $mahasiswaId)</span>
    </span>{
        $validator = Validator::make($request-&gt;all(), [
            <span class="hljs-string">'mata_kuliah_id'</span> =&gt; <span class="hljs-string">'required|exists:mata_kuliahs,id'</span>,
            <span class="hljs-string">'semester_ambil'</span> =&gt; <span class="hljs-string">'required|string'</span>,
        ]);
        
        <span class="hljs-keyword">if</span> ($validator-&gt;fails()) {
            <span class="hljs-keyword">return</span> redirect()-&gt;back()
                             -&gt;withErrors($validator)
                             -&gt;withInput();
        }
        
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        
        <span class="hljs-comment">// Cek apakah mahasiswa sudah mengambil mata kuliah ini di semester yang sama</span>
        $exists = $mahasiswa-&gt;mataKuliahs()
                            -&gt;wherePivot(<span class="hljs-string">'mata_kuliah_id'</span>, $request-&gt;mata_kuliah_id)
                            -&gt;wherePivot(<span class="hljs-string">'semester_ambil'</span>, $request-&gt;semester_ambil)
                            -&gt;exists();
        
        <span class="hljs-keyword">if</span> ($exists) {
            <span class="hljs-keyword">return</span> redirect()-&gt;back()
                            -&gt;with(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Mahasiswa sudah mengambil mata kuliah ini pada semester tersebut.'</span>);
        }
        
        <span class="hljs-comment">// Tambahkan relasi</span>
        $mahasiswa-&gt;mataKuliahs()-&gt;attach($request-&gt;mata_kuliah_id, [
            <span class="hljs-string">'semester_ambil'</span> =&gt; $request-&gt;semester_ambil,
            <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'aktif'</span>
        ]);
        
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'mahasiswa.matakuliah.index'</span>, $mahasiswaId)
                        -&gt;with(<span class="hljs-string">'success'</span>, <span class="hljs-string">'Mata kuliah berhasil ditambahkan.'</span>);
    }
    
    <span class="hljs-comment">/**
     * Menampilkan form untuk input nilai
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">editNilai</span><span class="hljs-params">($mahasiswaId, $mataKuliahId, $semesterAmbil)</span>
    </span>{
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        $mataKuliah = MataKuliah::findOrFail($mataKuliahId);
        
        $enrollment = $mahasiswa-&gt;mataKuliahs()
                                -&gt;wherePivot(<span class="hljs-string">'mata_kuliah_id'</span>, $mataKuliahId)
                                -&gt;wherePivot(<span class="hljs-string">'semester_ambil'</span>, $semesterAmbil)
                                -&gt;first();
        
        <span class="hljs-keyword">if</span> (!$enrollment) {
            <span class="hljs-keyword">return</span> redirect()-&gt;back()-&gt;with(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Data tidak ditemukan.'</span>);
        }
        
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'mahasiswa_matakuliah.edit_nilai'</span>, compact(<span class="hljs-string">'mahasiswa'</span>, <span class="hljs-string">'mataKuliah'</span>, <span class="hljs-string">'enrollment'</span>, <span class="hljs-string">'semesterAmbil'</span>));
    }
    
    <span class="hljs-comment">/**
     * Menyimpan nilai mata kuliah
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateNilai</span><span class="hljs-params">(Request $request, $mahasiswaId, $mataKuliahId, $semesterAmbil)</span>
    </span>{
        $validator = Validator::make($request-&gt;all(), [
            <span class="hljs-string">'nilai'</span> =&gt; <span class="hljs-string">'required|integer|min:0|max:100'</span>,
            <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'required|in:aktif,selesai,mengulang'</span>,
        ]);
        
        <span class="hljs-keyword">if</span> ($validator-&gt;fails()) {
            <span class="hljs-keyword">return</span> redirect()-&gt;back()
                             -&gt;withErrors($validator)
                             -&gt;withInput();
        }
        
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        
        <span class="hljs-comment">// Update nilai dan status</span>
        $mahasiswa-&gt;mataKuliahs()-&gt;updateExistingPivot($mataKuliahId, [
            <span class="hljs-string">'nilai'</span> =&gt; $request-&gt;nilai,
            <span class="hljs-string">'status'</span> =&gt; $request-&gt;status,
        ], <span class="hljs-keyword">false</span>, [
            <span class="hljs-string">'semester_ambil'</span> =&gt; $semesterAmbil
        ]);
        
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'mahasiswa.matakuliah.index'</span>, $mahasiswaId)
                        -&gt;with(<span class="hljs-string">'success'</span>, <span class="hljs-string">'Nilai berhasil diperbarui.'</span>);
    }
    
    <span class="hljs-comment">/**
     * Menghapus mata kuliah dari daftar yang diambil mahasiswa
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span><span class="hljs-params">($mahasiswaId, $mataKuliahId, $semesterAmbil)</span>
    </span>{
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        
        <span class="hljs-comment">// Cari dan hapus record spesifik berdasarkan semester_ambil</span>
        $mahasiswa-&gt;mataKuliahs()-&gt;wherePivot(<span class="hljs-string">'mata_kuliah_id'</span>, $mataKuliahId)
                                 -&gt;wherePivot(<span class="hljs-string">'semester_ambil'</span>, $semesterAmbil)
                                 -&gt;detach();
        
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'mahasiswa.matakuliah.index'</span>, $mahasiswaId)
                        -&gt;with(<span class="hljs-string">'success'</span>, <span class="hljs-string">'Mata kuliah berhasil dihapus dari daftar.'</span>);
    }
    
    <span class="hljs-comment">/**
     * Melihat transkrip nilai
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transkrip</span><span class="hljs-params">($mahasiswaId)</span>
    </span>{
        $mahasiswa = Mahasiswa::with([<span class="hljs-string">'mataKuliahs'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($query)</span> </span>{
            $query-&gt;wherePivot(<span class="hljs-string">'status'</span>, <span class="hljs-string">'selesai'</span>)
                  -&gt;orderBy(<span class="hljs-string">'semester'</span>)
                  -&gt;orderBy(<span class="hljs-string">'nama'</span>);
        }, <span class="hljs-string">'jurusan'</span>])-&gt;findOrFail($mahasiswaId);
        
        $ipk = $mahasiswa-&gt;hitungIPK();
        
        <span class="hljs-comment">// Nilai per semester</span>
        $nilaiPerSemester = [];
        
        <span class="hljs-keyword">foreach</span> ($mahasiswa-&gt;mataKuliahs <span class="hljs-keyword">as</span> $mk) {
            $semesterAmbil = $mk-&gt;pivot-&gt;semester_ambil;
            
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">isset</span>($nilaiPerSemester[$semesterAmbil])) {
                $nilaiPerSemester[$semesterAmbil] = [
                    <span class="hljs-string">'mata_kuliahs'</span> =&gt; [],
                    <span class="hljs-string">'total_sks'</span> =&gt; <span class="hljs-number">0</span>,
                    <span class="hljs-string">'total_nilai'</span> =&gt; <span class="hljs-number">0</span>,
                ];
            }
            
            $bobot = $mahasiswa-&gt;konversiNilaiKeBobot($mk-&gt;pivot-&gt;nilai);
            $nilaiPoint = $bobot * $mk-&gt;sks;
            
            $nilaiPerSemester[$semesterAmbil][<span class="hljs-string">'mata_kuliahs'</span>][] = $mk;
            $nilaiPerSemester[$semesterAmbil][<span class="hljs-string">'total_sks'</span>] += $mk-&gt;sks;
            $nilaiPerSemester[$semesterAmbil][<span class="hljs-string">'total_nilai'</span>] += $nilaiPoint;
        }
        
        <span class="hljs-comment">// Hitung IPS (Indeks Prestasi Semester)</span>
        <span class="hljs-keyword">foreach</span> ($nilaiPerSemester <span class="hljs-keyword">as</span> $semester =&gt; &amp;$data) {
            $data[<span class="hljs-string">'ips'</span>] = $data[<span class="hljs-string">'total_sks'</span>] &gt; <span class="hljs-number">0</span> ? 
                round($data[<span class="hljs-string">'total_nilai'</span>] / $data[<span class="hljs-string">'total_sks'</span>], <span class="hljs-number">2</span>) : <span class="hljs-number">0</span>;
        }
        
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'mahasiswa_matakuliah.transkrip'</span>, compact(<span class="hljs-string">'mahasiswa'</span>, <span class="hljs-string">'ipk'</span>, <span class="hljs-string">'nilaiPerSemester'</span>));
    }
}
</div></code></pre>
<h2 id="6-membuat-routes">6. Membuat Routes</h2>
<p>Tambahkan route berikut di <code>routes/web.php</code>:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Route untuk manajemen mata kuliah</span>
Route::resource(<span class="hljs-string">'mata-kuliah'</span>, MataKuliahController::class);

<span class="hljs-comment">// Route untuk relasi mahasiswa-mata kuliah</span>
Route::get(<span class="hljs-string">'mahasiswa/{mahasiswa}/mata-kuliah'</span>, [MahasiswaMataKuliahController::class, <span class="hljs-string">'index'</span>])
     -&gt;name(<span class="hljs-string">'mahasiswa.matakuliah.index'</span>);
     
Route::get(<span class="hljs-string">'mahasiswa/{mahasiswa}/mata-kuliah/create'</span>, [MahasiswaMataKuliahController::class, <span class="hljs-string">'create'</span>])
     -&gt;name(<span class="hljs-string">'mahasiswa.matakuliah.create'</span>);
     
Route::post(<span class="hljs-string">'mahasiswa/{mahasiswa}/mata-kuliah'</span>, [MahasiswaMataKuliahController::class, <span class="hljs-string">'store'</span>])
     -&gt;name(<span class="hljs-string">'mahasiswa.matakuliah.store'</span>);
     
Route::get(<span class="hljs-string">'mahasiswa/{mahasiswa}/mata-kuliah/{mataKuliah}/{semester}/edit-nilai'</span>, [MahasiswaMataKuliahController::class, <span class="hljs-string">'editNilai'</span>])
     -&gt;name(<span class="hljs-string">'mahasiswa.matakuliah.edit-nilai'</span>);
     
Route::put(<span class="hljs-string">'mahasiswa/{mahasiswa}/mata-kuliah/{mataKuliah}/{semester}'</span>, [MahasiswaMataKuliahController::class, <span class="hljs-string">'updateNilai'</span>])
     -&gt;name(<span class="hljs-string">'mahasiswa.matakuliah.update-nilai'</span>);
     
Route::delete(<span class="hljs-string">'mahasiswa/{mahasiswa}/mata-kuliah/{mataKuliah}/{semester}'</span>, [MahasiswaMataKuliahController::class, <span class="hljs-string">'destroy'</span>])
     -&gt;name(<span class="hljs-string">'mahasiswa.matakuliah.destroy'</span>);
     
Route::get(<span class="hljs-string">'mahasiswa/{mahasiswa}/transkrip'</span>, [MahasiswaMataKuliahController::class, <span class="hljs-string">'transkrip'</span>])
     -&gt;name(<span class="hljs-string">'mahasiswa.transkrip'</span>);
</div></code></pre>
<h2 id="7-membuat-view-untuk-manajemen-relasi">7. Membuat View untuk Manajemen Relasi</h2>
<h3 id="view-index---resourcesviewsmahasiswamatakuliahindexbladephp">View Index - resources/views/mahasiswa_matakuliah/index.blade.php</h3>
<pre class="hljs"><code><div>@extends(<span class="hljs-string">'layouts.app'</span>)

@section(<span class="hljs-string">'content'</span>)
&lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">container</span>"&gt;
    &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">row</span>"&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">col</span>-<span class="hljs-title">md</span>-12 <span class="hljs-title">mb</span>-4"&gt;
            &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">d</span>-<span class="hljs-title">flex</span> <span class="hljs-title">justify</span>-<span class="hljs-title">content</span>-<span class="hljs-title">between</span> <span class="hljs-title">align</span>-<span class="hljs-title">items</span>-<span class="hljs-title">center</span>"&gt;
                &lt;<span class="hljs-title">h1</span>&gt;<span class="hljs-title">Daftar</span> <span class="hljs-title">Mata</span> <span class="hljs-title">Kuliah</span> - </span>{{ $mahasiswa-&gt;nama }} ({{ $mahasiswa-&gt;nim }})&lt;/h1&gt;
                &lt;div&gt;
                    &lt;a href=<span class="hljs-string">"{{ route('mahasiswa.matakuliah.create', $mahasiswa-&gt;id) }}"</span> <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">btn</span> <span class="hljs-title">btn</span>-<span class="hljs-title">primary</span>"&gt;<span class="hljs-title">Tambah</span> <span class="hljs-title">Mata</span> <span class="hljs-title">Kuliah</span>&lt;/<span class="hljs-title">a</span>&gt;
                    &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="</span>{{ route(<span class="hljs-string">'mahasiswa.transkrip'</span>, $mahasiswa-&gt;id) }}<span class="hljs-string">" class="</span>btn btn-info<span class="hljs-string">"&gt;Lihat Transkrip&lt;/a&gt;
                    &lt;a href="</span>{{ route(<span class="hljs-string">'mahasiswa.index'</span>) }}<span class="hljs-string">" class="</span>btn btn-secondary<span class="hljs-string">"&gt;Kembali&lt;/a&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;p&gt;Program Studi: {{ $mahasiswa-&gt;jurusan-&gt;nama }}&lt;/p&gt;
            &lt;p&gt;IPK: {{ $ipk }}&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    @if(session('success'))
    &lt;div class="</span>alert alert-success<span class="hljs-string">"&gt;
        {{ session('success') }}
    &lt;/div&gt;
    @endif

    @if(session('error'))
    &lt;div class="</span>alert alert-danger<span class="hljs-string">"&gt;
        {{ session('error') }}
    &lt;/div&gt;
    @endif

    &lt;div class="</span>card<span class="hljs-string">"&gt;
        &lt;div class="</span>card-header<span class="hljs-string">"&gt;
            &lt;h5&gt;Mata Kuliah yang Diambil&lt;/h5&gt;
        &lt;/div&gt;
        &lt;div class="</span>card-body<span class="hljs-string">"&gt;
            &lt;table class="</span>table table-striped<span class="hljs-string">"&gt;
                &lt;thead&gt;
                    &lt;tr&gt;
                        &lt;th&gt;Kode&lt;/th&gt;
                        &lt;th&gt;Nama Mata Kuliah&lt;/th&gt;
                        &lt;th&gt;SKS&lt;/th&gt;
                        &lt;th&gt;Semester&lt;/th&gt;
                        &lt;th&gt;Semester Ambil&lt;/th&gt;
                        &lt;th&gt;Nilai&lt;/th&gt;
                        &lt;th&gt;Status&lt;/th&gt;
                        &lt;th&gt;Aksi&lt;/th&gt;
                    &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                    @forelse($mahasiswa-&gt;mataKuliahs as $mk)
                    &lt;tr&gt;
                        &lt;td&gt;{{ $mk-&gt;kode }}&lt;/td&gt;
                        &lt;td&gt;{{ $mk-&gt;nama }}&lt;/td&gt;
                        &lt;td&gt;{{ $mk-&gt;sks }}&lt;/td&gt;
                        &lt;td&gt;{{ $mk-&gt;semester }}&lt;/td&gt;
                        &lt;td&gt;{{ $mk-&gt;pivot-&gt;semester_ambil }}&lt;/td&gt;
                        &lt;td&gt;{{ $mk-&gt;pivot-&gt;nilai ?? '-' }}&lt;/td&gt;
                        &lt;td&gt;
                            @if($mk-&gt;pivot-&gt;status == 'aktif')
                                &lt;span class="</span>badge bg-primary<span class="hljs-string">"&gt;Aktif&lt;/span&gt;
                            @elseif($mk-&gt;pivot-&gt;status == 'selesai')
                                &lt;span class="</span>badge bg-success<span class="hljs-string">"&gt;Selesai&lt;/span&gt;
                            @elseif($mk-&gt;pivot-&gt;status == 'mengulang')
                                &lt;span class="</span>badge bg-warning<span class="hljs-string">"&gt;Mengulang&lt;/span&gt;
                            @endif
                        &lt;/td&gt;
                        &lt;td&gt;
                            &lt;a href="</span>{{ route(<span class="hljs-string">'mahasiswa.matakuliah.edit-nilai'</span>, [$mahasiswa-&gt;id, $mk-&gt;id, $mk-&gt;pivot-&gt;semester_ambil]) }}<span class="hljs-string">" class="</span>btn btn-sm btn-info<span class="hljs-string">"&gt;Edit Nilai&lt;/a&gt;
                            
                            &lt;form action="</span>{{ route(<span class="hljs-string">'mahasiswa.matakuliah.destroy'</span>, [$mahasiswa-&gt;id, $mk-&gt;id, $mk-&gt;pivot-&gt;semester_ambil]) }}<span class="hljs-string">" method="</span>POST<span class="hljs-string">" class="</span>d-inline<span class="hljs-string">"&gt;
                                @csrf
                                @method('DELETE')
                                &lt;button type="</span>submit<span class="hljs-string">" class="</span>btn btn-sm btn-danger<span class="hljs-string">" onclick="</span><span class="hljs-keyword">return</span> confirm(<span class="hljs-string">'Apakah Anda yakin ingin menghapus mata kuliah ini?'</span>)<span class="hljs-string">"&gt;Hapus&lt;/button&gt;
                            &lt;/form&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    @empty
                    &lt;tr&gt;
                        &lt;td colspan="</span><span class="hljs-number">8</span><span class="hljs-string">" class="</span>text-center<span class="hljs-string">"&gt;Belum ada mata kuliah yang diambil&lt;/td&gt;
                    &lt;/tr&gt;
                    @endforelse
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
@endsection
</span></div></code></pre>
<h3 id="form-tambah-mata-kuliah---resourcesviewsmahasiswamatakuliahcreatebladephp">Form Tambah Mata Kuliah - resources/views/mahasiswa_matakuliah/create.blade.php</h3>
<pre class="hljs"><code><div>@extends(<span class="hljs-string">'layouts.app'</span>)

@section(<span class="hljs-string">'content'</span>)
&lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">container</span>"&gt;
    &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">row</span>"&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">col</span>-<span class="hljs-title">md</span>-12 <span class="hljs-title">mb</span>-4"&gt;
            &lt;<span class="hljs-title">h1</span>&gt;<span class="hljs-title">Tambah</span> <span class="hljs-title">Mata</span> <span class="hljs-title">Kuliah</span> - </span>{{ $mahasiswa-&gt;nama }} ({{ $mahasiswa-&gt;nim }})&lt;/h1&gt;
            &lt;p&gt;Program Studi: {{ $mahasiswa-&gt;jurusan-&gt;nama }}&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    @<span class="hljs-keyword">if</span>(session(<span class="hljs-string">'error'</span>))
    &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">alert</span> <span class="hljs-title">alert</span>-<span class="hljs-title">danger</span>"&gt;
        </span>{{ session(<span class="hljs-string">'error'</span>) }}
    &lt;/div&gt;
    @<span class="hljs-keyword">endif</span>

    &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">card</span>"&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">card</span>-<span class="hljs-title">header</span>"&gt;
            &lt;<span class="hljs-title">h5</span>&gt;<span class="hljs-title">Form</span> <span class="hljs-title">Tambah</span> <span class="hljs-title">Mata</span> <span class="hljs-title">Kuliah</span>&lt;/<span class="hljs-title">h5</span>&gt;
        &lt;/<span class="hljs-title">div</span>&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">card</span>-<span class="hljs-title">body</span>"&gt;
            &lt;<span class="hljs-title">form</span> <span class="hljs-title">action</span>="</span>{{ route(<span class="hljs-string">'mahasiswa.matakuliah.store'</span>, $mahasiswa-&gt;id) }}<span class="hljs-string">" method="</span>POST<span class="hljs-string">"&gt;
                @csrf

                &lt;div class="</span>mb<span class="hljs-number">-3</span><span class="hljs-string">"&gt;
                    &lt;label for="</span>mata_kuliah_id<span class="hljs-string">" class="</span>form-label<span class="hljs-string">"&gt;Mata Kuliah&lt;/label&gt;
                    &lt;select name="</span>mata_kuliah_id<span class="hljs-string">" id="</span>mata_kuliah_id<span class="hljs-string">" class="</span>form-control @error(<span class="hljs-string">'mata_kuliah_id'</span>) is-invalid @enderror<span class="hljs-string">" required&gt;
                        &lt;option value="</span><span class="hljs-string">"&gt;-- Pilih Mata Kuliah --&lt;/option&gt;
                        @foreach($mataKuliahs as $mk)
                        &lt;option value="</span>{{ $mk-&gt;id }}<span class="hljs-string">"&gt;{{ $mk-&gt;kode }} - {{ $mk-&gt;nama }} ({{ $mk-&gt;sks }} SKS, Semester {{ $mk-&gt;semester }})&lt;/option&gt;
                        @endforeach
                    &lt;/select&gt;
                    @error('mata_kuliah_id')
                    &lt;div class="</span>invalid-feedback<span class="hljs-string">"&gt;{{ $message }}&lt;/div&gt;
                    @enderror
                &lt;/div&gt;

                &lt;div class="</span>mb<span class="hljs-number">-3</span><span class="hljs-string">"&gt;
                    &lt;label for="</span>semester_ambil<span class="hljs-string">" class="</span>form-label<span class="hljs-string">"&gt;Semester Pengambilan&lt;/label&gt;
                    &lt;select name="</span>semester_ambil<span class="hljs-string">" id="</span>semester_ambil<span class="hljs-string">" class="</span>form-control @error(<span class="hljs-string">'semester_ambil'</span>) is-invalid @enderror<span class="hljs-string">" required&gt;
                        &lt;option value="</span><span class="hljs-string">"&gt;-- Pilih Semester --&lt;/option&gt;
                        @foreach($semesterOptions as $semester)
                        &lt;option value="</span>{{ $semester }}<span class="hljs-string">"&gt;{{ $semester }}&lt;/option&gt;
                        @endforeach
                    &lt;/select&gt;
                    @error('semester_ambil')
                    &lt;div class="</span>invalid-feedback<span class="hljs-string">"&gt;{{ $message }}&lt;/div&gt;
                    @enderror
                &lt;/div&gt;

                &lt;div class="</span>mb<span class="hljs-number">-3</span><span class="hljs-string">"&gt;
                    &lt;button type="</span>submit<span class="hljs-string">" class="</span>btn btn-primary<span class="hljs-string">"&gt;Simpan&lt;/button&gt;
                    &lt;a href="</span>{{ route(<span class="hljs-string">'mahasiswa.matakuliah.index'</span>, $mahasiswa-&gt;id) }}<span class="hljs-string">" class="</span>btn btn-secondary<span class="hljs-string">"&gt;Batal&lt;/a&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
@endsection
</span></div></code></pre>
<h3 id="form-edit-nilai---resourcesviewsmahasiswamatakuliaheditnilaibladephp">Form Edit Nilai - resources/views/mahasiswa_matakuliah/edit_nilai.blade.php</h3>
<pre class="hljs"><code><div>@extends(<span class="hljs-string">'layouts.app'</span>)

@section(<span class="hljs-string">'content'</span>)
&lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">container</span>"&gt;
    &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">row</span>"&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">col</span>-<span class="hljs-title">md</span>-12 <span class="hljs-title">mb</span>-4"&gt;
            &lt;<span class="hljs-title">h1</span>&gt;<span class="hljs-title">Input</span> <span class="hljs-title">Nilai</span> <span class="hljs-title">Mata</span> <span class="hljs-title">Kuliah</span>&lt;/<span class="hljs-title">h1</span>&gt;
            &lt;<span class="hljs-title">p</span>&gt;<span class="hljs-title">Mahasiswa</span>: </span>{{ $mahasiswa-&gt;nama }} ({{ $mahasiswa-&gt;nim }})&lt;/p&gt;
            &lt;p&gt;Mata Kuliah: {{ $mataKuliah-&gt;kode }} - {{ $mataKuliah-&gt;nama }} ({{ $mataKuliah-&gt;sks }} SKS)&lt;/p&gt;
            &lt;p&gt;Semester Pengambilan: {{ $semesterAmbil }}&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">card</span>"&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">card</span>-<span class="hljs-title">header</span>"&gt;
            &lt;<span class="hljs-title">h5</span>&gt;<span class="hljs-title">Form</span> <span class="hljs-title">Input</span> <span class="hljs-title">Nilai</span>&lt;/<span class="hljs-title">h5</span>&gt;
        &lt;/<span class="hljs-title">div</span>&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">card</span>-<span class="hljs-title">body</span>"&gt;
            &lt;<span class="hljs-title">form</span> <span class="hljs-title">action</span>="</span>{{ route(<span class="hljs-string">'mahasiswa.matakuliah.update-nilai'</span>, [$mahasiswa-&gt;id, $mataKuliah-&gt;id, $semesterAmbil]) }}<span class="hljs-string">" method="</span>POST<span class="hljs-string">"&gt;
                @csrf
                @method('PUT')

                &lt;div class="</span>mb<span class="hljs-number">-3</span><span class="hljs-string">"&gt;
                    &lt;label for="</span>nilai<span class="hljs-string">" class="</span>form-label<span class="hljs-string">"&gt;Nilai (0-100)&lt;/label&gt;
                    &lt;input type="</span>number<span class="hljs-string">" name="</span>nilai<span class="hljs-string">" id="</span>nilai<span class="hljs-string">" class="</span>form-control @error(<span class="hljs-string">'nilai'</span>) is-invalid @enderror<span class="hljs-string">" value="</span>{{ old(<span class="hljs-string">'nilai'</span>, $enrollment-&gt;pivot-&gt;nilai) }}<span class="hljs-string">" min="</span><span class="hljs-number">0</span><span class="hljs-string">" max="</span><span class="hljs-number">100</span><span class="hljs-string">" required&gt;
                    @error('nilai')
                    &lt;div class="</span>invalid-feedback<span class="hljs-string">"&gt;{{ $message }}&lt;/div&gt;
                    @enderror
                &lt;/div&gt;

                &lt;div class="</span>mb<span class="hljs-number">-3</span><span class="hljs-string">"&gt;
                    &lt;label for="</span>status<span class="hljs-string">" class="</span>form-label<span class="hljs-string">"&gt;Status&lt;/label&gt;
                    &lt;select name="</span>status<span class="hljs-string">" id="</span>status<span class="hljs-string">" class="</span>form-control @error(<span class="hljs-string">'status'</span>) is-invalid @enderror<span class="hljs-string">" required&gt;
                        &lt;option value="</span>aktif<span class="hljs-string">" {{ $enrollment-&gt;pivot-&gt;status == 'aktif' ? 'selected' : '' }}&gt;Aktif&lt;/option&gt;
                        &lt;option value="</span>selesai<span class="hljs-string">" {{ $enrollment-&gt;pivot-&gt;status == 'selesai' ? 'selected' : '' }}&gt;Selesai&lt;/option&gt;
                        &lt;option value="</span>mengulang<span class="hljs-string">" {{ $enrollment-&gt;pivot-&gt;status == 'mengulang' ? 'selected' : '' }}&gt;Mengulang&lt;/option&gt;
                    &lt;/select&gt;
                    @error('status')
                    &lt;div class="</span>invalid-feedback<span class="hljs-string">"&gt;{{ $message }}&lt;/div&gt;
                    @enderror
                &lt;/div&gt;

                &lt;div class="</span>mb<span class="hljs-number">-3</span><span class="hljs-string">"&gt;
                    &lt;button type="</span>submit<span class="hljs-string">" class="</span>btn btn-primary<span class="hljs-string">"&gt;Simpan&lt;/button&gt;
                    &lt;a href="</span>{{ route(<span class="hljs-string">'mahasiswa.matakuliah.index'</span>, $mahasiswa-&gt;id) }}<span class="hljs-string">" class="</span>btn btn-secondary<span class="hljs-string">"&gt;Batal&lt;/a&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
@endsection
</span></div></code></pre>
<h3 id="view-transkrip---resourcesviewsmahasiswamatakuliahtranskripbladephp">View Transkrip - resources/views/mahasiswa_matakuliah/transkrip.blade.php</h3>
<pre class="hljs"><code><div>@extends(<span class="hljs-string">'layouts.app'</span>)

@section(<span class="hljs-string">'content'</span>)
&lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">container</span>"&gt;
    &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">row</span>"&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">col</span>-<span class="hljs-title">md</span>-12 <span class="hljs-title">mb</span>-4"&gt;
            &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">d</span>-<span class="hljs-title">flex</span> <span class="hljs-title">justify</span>-<span class="hljs-title">content</span>-<span class="hljs-title">between</span> <span class="hljs-title">align</span>-<span class="hljs-title">items</span>-<span class="hljs-title">center</span>"&gt;
                &lt;<span class="hljs-title">h1</span>&gt;<span class="hljs-title">Transkrip</span> <span class="hljs-title">Nilai</span>&lt;/<span class="hljs-title">h1</span>&gt;
                &lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="</span>{{ route(<span class="hljs-string">'mahasiswa.matakuliah.index'</span>, $mahasiswa-&gt;id) }}<span class="hljs-string">" class="</span>btn btn-secondary<span class="hljs-string">"&gt;Kembali&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="</span>card mb<span class="hljs-number">-4</span><span class="hljs-string">"&gt;
        &lt;div class="</span>card-header<span class="hljs-string">"&gt;
            &lt;h5&gt;Data Mahasiswa&lt;/h5&gt;
        &lt;/div&gt;
        &lt;div class="</span>card-body<span class="hljs-string">"&gt;
            &lt;table class="</span>table table-bordered<span class="hljs-string">"&gt;
                &lt;tr&gt;
                    &lt;th width="</span><span class="hljs-number">200</span><span class="hljs-string">"&gt;Nama&lt;/th&gt;
                    &lt;td&gt;{{ $mahasiswa-&gt;nama }}&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;NIM&lt;/th&gt;
                    &lt;td&gt;{{ $mahasiswa-&gt;nim }}&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;Program Studi&lt;/th&gt;
                    &lt;td&gt;{{ $mahasiswa-&gt;jurusan-&gt;nama }}&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;IPK&lt;/th&gt;
                    &lt;td&gt;&lt;strong&gt;{{ $ipk }}&lt;/strong&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    @if(count($nilaiPerSemester) &gt; 0)
        @foreach($nilaiPerSemester as $semester =&gt; $data)
        &lt;div class="</span>card mb<span class="hljs-number">-4</span><span class="hljs-string">"&gt;
            &lt;div class="</span>card-header bg-light<span class="hljs-string">"&gt;
                &lt;h5&gt;{{ $semester }}&lt;/h5&gt;
            &lt;/div&gt;
            &lt;div class="</span>card-body<span class="hljs-string">"&gt;
                &lt;table class="</span>table table-striped<span class="hljs-string">"&gt;
                    &lt;thead&gt;
                        &lt;tr&gt;
                            &lt;th&gt;Kode&lt;/th&gt;
                            &lt;th&gt;Mata Kuliah&lt;/th&gt;
                            &lt;th&gt;SKS&lt;/th&gt;
                            &lt;th&gt;Nilai&lt;/th&gt;
                            &lt;th&gt;Bobot&lt;/th&gt;
                        &lt;/tr&gt;
                    &lt;/thead&gt;
                    &lt;tbody&gt;
                        @foreach($data['mata_kuliahs'] as $mk)
                        &lt;tr&gt;
                            &lt;td&gt;{{ $mk-&gt;kode }}&lt;/td&gt;
                            &lt;td&gt;{{ $mk-&gt;nama }}&lt;/td&gt;
                            &lt;td&gt;{{ $mk-&gt;sks }}&lt;/td&gt;
                            &lt;td&gt;{{ $mk-&gt;pivot-&gt;nilai }}&lt;/td&gt;
                            &lt;td&gt;
                                @php
                                    $bobot = $mahasiswa-&gt;konversiNilaiKeBobot($mk-&gt;pivot-&gt;nilai);
                                    echo $bobot;
                                @endphp
                            &lt;/td&gt;
                        &lt;/tr&gt;
                        @endforeach
                    &lt;/tbody&gt;
                    &lt;tfoot&gt;
                        &lt;tr&gt;
                            &lt;th colspan="</span><span class="hljs-number">2</span><span class="hljs-string">"&gt;Total&lt;/th&gt;
                            &lt;th&gt;{{ $data['total_sks'] }} SKS&lt;/th&gt;
                            &lt;th colspan="</span><span class="hljs-number">2</span><span class="hljs-string">"&gt;IPS: {{ $data['ips'] }}&lt;/th&gt;
                        &lt;/tr&gt;
                    &lt;/tfoot&gt;
                &lt;/table&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        @endforeach
    @else
        &lt;div class="</span>alert alert-info<span class="hljs-string">"&gt;
            Belum ada data nilai yang tersedia untuk ditampilkan dalam transkrip.
        &lt;/div&gt;
    @endif
&lt;/div&gt;
@endsection
</span></div></code></pre>
<h2 id="8-testing-integrasi">8. Testing Integrasi</h2>
<p>Setelah semua kode di atas diimplementasikan, kita perlu melakukan testing integrasi untuk memastikan bahwa relasi Mahasiswa-Mata Kuliah berfungsi dengan baik. Berikut langkah-langkah testing yang bisa dilakukan:</p>
<h3 id="81-menambahkan-mata-kuliah-pada-mahasiswa">8.1 Menambahkan Mata Kuliah pada Mahasiswa</h3>
<ol>
<li>Akses halaman detail mahasiswa</li>
<li>Klik tombol &quot;Daftar Mata Kuliah&quot;</li>
<li>Klik tombol &quot;Tambah Mata Kuliah&quot;</li>
<li>Pilih mata kuliah dari dropdown</li>
<li>Pilih semester pengambilan</li>
<li>Klik tombol &quot;Simpan&quot;</li>
<li>Verifikasi mata kuliah berhasil ditambahkan</li>
</ol>
<h3 id="82-memasukkan-nilai-mata-kuliah">8.2 Memasukkan Nilai Mata Kuliah</h3>
<ol>
<li>Akses halaman daftar mata kuliah mahasiswa</li>
<li>Klik tombol &quot;Edit Nilai&quot; pada mata kuliah yang sudah diambil</li>
<li>Input nilai (0-100)</li>
<li>Pilih status (aktif, selesai, mengulang)</li>
<li>Klik tombol &quot;Simpan&quot;</li>
<li>Verifikasi nilai berhasil disimpan</li>
</ol>
<h3 id="83-melihat-transkrip-nilai">8.3 Melihat Transkrip Nilai</h3>
<ol>
<li>Akses halaman daftar mata kuliah mahasiswa</li>
<li>Klik tombol &quot;Lihat Transkrip&quot;</li>
<li>Verifikasi semua mata kuliah dengan status &quot;selesai&quot; ditampilkan dengan benar</li>
<li>Verifikasi perhitungan IPS per semester dan IPK total sudah benar</li>
</ol>
<h3 id="84-menghapus-mata-kuliah">8.4 Menghapus Mata Kuliah</h3>
<ol>
<li>Akses halaman daftar mata kuliah mahasiswa</li>
<li>Klik tombol &quot;Hapus&quot; pada mata kuliah yang ingin dihapus</li>
<li>Konfirmasi penghapusan</li>
<li>Verifikasi mata kuliah berhasil dihapus dari daftar</li>
</ol>
<h2 id="9-perluasan-fitur">9. Perluasan Fitur</h2>
<p>Setelah implementasi dasar, kita bisa memperluas fitur dengan beberapa tambahan berikut:</p>
<h3 id="91-batasan-pengambilan-sks">9.1 Batasan Pengambilan SKS</h3>
<p>Tambahkan fitur untuk membatasi jumlah SKS yang bisa diambil berdasarkan IP semester sebelumnya:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Tambahkan di MahasiswaMataKuliahController</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMaksimumSKS</span><span class="hljs-params">($mahasiswaId, $semesterAmbil)</span>
</span>{
    $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
    
    <span class="hljs-comment">// Cari semester sebelumnya dari format semester saat ini (misalnya: "Ganjil 2023/2024")</span>
    $semesterTerakhir = <span class="hljs-keyword">$this</span>-&gt;getSemesterSebelumnya($semesterAmbil);
    
    <span class="hljs-comment">// Hitung IPS semester terakhir</span>
    $ipsSemesterTerakhir = <span class="hljs-keyword">$this</span>-&gt;hitungIPSSemester($mahasiswaId, $semesterTerakhir);
    
    <span class="hljs-comment">// Tentukan maksimum SKS berdasarkan IPS</span>
    <span class="hljs-keyword">if</span> ($ipsSemesterTerakhir &gt;= <span class="hljs-number">3.5</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">24</span>;
    } <span class="hljs-keyword">elseif</span> ($ipsSemesterTerakhir &gt;= <span class="hljs-number">3.0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">22</span>;
    } <span class="hljs-keyword">elseif</span> ($ipsSemesterTerakhir &gt;= <span class="hljs-number">2.5</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">20</span>;
    } <span class="hljs-keyword">elseif</span> ($ipsSemesterTerakhir &gt;= <span class="hljs-number">2.0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">18</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">16</span>;
    }
}
</div></code></pre>
<h3 id="92-prasyarat-mata-kuliah">9.2 Prasyarat Mata Kuliah</h3>
<p>Tambahkan fitur untuk memeriksa prasyarat mata kuliah:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Tambahkan relasi di model MataKuliah</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prasyarats</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsToMany(MataKuliah::class, <span class="hljs-string">'mata_kuliah_prasyarat'</span>, <span class="hljs-string">'mata_kuliah_id'</span>, <span class="hljs-string">'prasyarat_id'</span>);
}

<span class="hljs-comment">// Cek apakah mahasiswa memenuhi prasyarat</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkPrasyarat</span><span class="hljs-params">($mahasiswaId, $mataKuliahId)</span>
</span>{
    $mataKuliah = MataKuliah::with(<span class="hljs-string">'prasyarats'</span>)-&gt;findOrFail($mataKuliahId);
    $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
    
    <span class="hljs-comment">// Jika tidak ada prasyarat</span>
    <span class="hljs-keyword">if</span> ($mataKuliah-&gt;prasyarats-&gt;isEmpty()) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
    
    $prasyaratTerpenuhi = <span class="hljs-keyword">true</span>;
    
    <span class="hljs-keyword">foreach</span> ($mataKuliah-&gt;prasyarats <span class="hljs-keyword">as</span> $prasyarat) {
        <span class="hljs-comment">// Cek apakah mahasiswa sudah lulus mata kuliah prasyarat</span>
        $sudahLulus = $mahasiswa-&gt;mataKuliahs()
                                -&gt;wherePivot(<span class="hljs-string">'mata_kuliah_id'</span>, $prasyarat-&gt;id)
                                -&gt;wherePivot(<span class="hljs-string">'status'</span>, <span class="hljs-string">'selesai'</span>)
                                -&gt;wherePivot(<span class="hljs-string">'nilai'</span>, <span class="hljs-string">'&gt;='</span>, <span class="hljs-number">60</span>) <span class="hljs-comment">// Nilai minimal untuk lulus</span>
                                -&gt;exists();
        
        <span class="hljs-keyword">if</span> (!$sudahLulus) {
            $prasyaratTerpenuhi = <span class="hljs-keyword">false</span>;
            <span class="hljs-keyword">break</span>;
        }
    }
    
    <span class="hljs-keyword">return</span> $prasyaratTerpenuhi;
}
</div></code></pre>
<h3 id="93-riwayat-akademik">9.3 Riwayat Akademik</h3>
<p>Tambahkan fitur untuk melihat riwayat akademik secara lengkap:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Tambahkan di MahasiswaMataKuliahController</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">riwayatAkademik</span><span class="hljs-params">($mahasiswaId)</span>
</span>{
    $mahasiswa = Mahasiswa::with([<span class="hljs-string">'mataKuliahs'</span>, <span class="hljs-string">'jurusan'</span>])-&gt;findOrFail($mahasiswaId);
    
    <span class="hljs-comment">// Kelompokkan berdasarkan semester</span>
    $riwayatSemester = [];
    
    <span class="hljs-keyword">foreach</span> ($mahasiswa-&gt;mataKuliahs <span class="hljs-keyword">as</span> $mk) {
        $semesterAmbil = $mk-&gt;pivot-&gt;semester_ambil;
        
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">isset</span>($riwayatSemester[$semesterAmbil])) {
            $riwayatSemester[$semesterAmbil] = [
                <span class="hljs-string">'mata_kuliahs'</span> =&gt; [],
                <span class="hljs-string">'total_sks'</span> =&gt; <span class="hljs-number">0</span>,
                <span class="hljs-string">'ips'</span> =&gt; <span class="hljs-number">0</span>,
            ];
        }
        
        $riwayatSemester[$semesterAmbil][<span class="hljs-string">'mata_kuliahs'</span>][] = $mk;
        $riwayatSemester[$semesterAmbil][<span class="hljs-string">'total_sks'</span>] += $mk-&gt;sks;
    }
    
    <span class="hljs-comment">// Hitung IPS untuk setiap semester</span>
    <span class="hljs-keyword">foreach</span> ($riwayatSemester <span class="hljs-keyword">as</span> $semester =&gt; &amp;$data) {
        $data[<span class="hljs-string">'ips'</span>] = <span class="hljs-keyword">$this</span>-&gt;hitungIPSSemester($mahasiswaId, $semester);
    }
    
    <span class="hljs-comment">// Hitung IPK</span>
    $ipk = $mahasiswa-&gt;hitungIPK();
    
    <span class="hljs-keyword">return</span> view(<span class="hljs-string">'mahasiswa_matakuliah.riwayat_akademik'</span>, compact(<span class="hljs-string">'mahasiswa'</span>, <span class="hljs-string">'riwayatSemester'</span>, <span class="hljs-string">'ipk'</span>));
}
</div></code></pre>
<h2 id="10-best-practices-dan-tips">10. Best Practices dan Tips</h2>
<h3 id="101-validasi-input">10.1 Validasi Input</h3>
<p>Selalu validasi input dari pengguna untuk memastikan integritas data:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Contoh validasi untuk penambahan mata kuliah</span>
$validator = Validator::make($request-&gt;all(), [
    <span class="hljs-string">'mata_kuliah_id'</span> =&gt; <span class="hljs-string">'required|exists:mata_kuliahs,id'</span>,
    <span class="hljs-string">'semester_ambil'</span> =&gt; <span class="hljs-string">'required|string'</span>,
]);

<span class="hljs-keyword">if</span> ($validator-&gt;fails()) {
    <span class="hljs-keyword">return</span> redirect()-&gt;back()
                     -&gt;withErrors($validator)
                     -&gt;withInput();
}
</div></code></pre>
<h3 id="102-gunakan-transaction-untuk-update-multiple-records">10.2 Gunakan Transaction untuk Update Multiple Records</h3>
<p>Gunakan transaction database untuk memastikan konsistensi data ketika melakukan update multiple records:</p>
<pre class="hljs"><code><div>DB::transaction(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> <span class="hljs-title">use</span> <span class="hljs-params">($mahasiswaId, $request)</span> </span>{
    <span class="hljs-comment">// Hapus mata kuliah lama</span>
    DB::table(<span class="hljs-string">'mahasiswa_mata_kuliah'</span>)
        -&gt;where(<span class="hljs-string">'mahasiswa_id'</span>, $mahasiswaId)
        -&gt;where(<span class="hljs-string">'semester_ambil'</span>, $request-&gt;semester)
        -&gt;delete();
    
    <span class="hljs-comment">// Tambahkan mata kuliah baru</span>
    <span class="hljs-keyword">foreach</span> ($request-&gt;mata_kuliah_ids <span class="hljs-keyword">as</span> $mkId) {
        DB::table(<span class="hljs-string">'mahasiswa_mata_kuliah'</span>)-&gt;insert([
            <span class="hljs-string">'mahasiswa_id'</span> =&gt; $mahasiswaId,
            <span class="hljs-string">'mata_kuliah_id'</span> =&gt; $mkId,
            <span class="hljs-string">'semester_ambil'</span> =&gt; $request-&gt;semester,
            <span class="hljs-string">'created_at'</span> =&gt; now(),
            <span class="hljs-string">'updated_at'</span> =&gt; now(),
        ]);
    }
});
</div></code></pre>
<h3 id="103-optimasi-query-dengan-eager-loading">10.3 Optimasi Query dengan Eager Loading</h3>
<p>Selalu gunakan eager loading untuk menghindari N+1 query problem:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Tidak optimal</span>
$mahasiswas = Mahasiswa::all();
<span class="hljs-keyword">foreach</span> ($mahasiswas <span class="hljs-keyword">as</span> $m) {
    <span class="hljs-keyword">echo</span> $m-&gt;jurusan-&gt;nama;
    <span class="hljs-keyword">foreach</span> ($m-&gt;mataKuliahs <span class="hljs-keyword">as</span> $mk) {
        <span class="hljs-keyword">echo</span> $mk-&gt;nama;
    }
}

<span class="hljs-comment">// Optimal dengan eager loading</span>
$mahasiswas = Mahasiswa::with(<span class="hljs-string">'jurusan'</span>, <span class="hljs-string">'mataKuliahs'</span>)-&gt;get();
<span class="hljs-keyword">foreach</span> ($mahasiswas <span class="hljs-keyword">as</span> $m) {
    <span class="hljs-keyword">echo</span> $m-&gt;jurusan-&gt;nama;
    <span class="hljs-keyword">foreach</span> ($m-&gt;mataKuliahs <span class="hljs-keyword">as</span> $mk) {
        <span class="hljs-keyword">echo</span> $mk-&gt;nama;
    }
}
</div></code></pre>
<h3 id="104-gunakan-events-untuk-melacak-perubahan">10.4 Gunakan Events untuk Melacak Perubahan</h3>
<p>Gunakan events Laravel untuk melacak perubahan pada relasi:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Di model Mahasiswa</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">booted</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">static</span>::updated(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($mahasiswa)</span> </span>{
        <span class="hljs-comment">// Log perubahan data mahasiswa</span>
    });
}

<span class="hljs-comment">// Di Observer</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updatingPivot</span><span class="hljs-params">(Mahasiswa $mahasiswa, MataKuliah $mataKuliah, array $attributes)</span>
</span>{
    <span class="hljs-comment">// Log perubahan nilai</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>($attributes[<span class="hljs-string">'nilai'</span>])) {
        <span class="hljs-comment">// Simpan log perubahan nilai</span>
    }
}
</div></code></pre>
<h3 id="105-caching-untuk-performa">10.5 Caching untuk Performa</h3>
<p>Gunakan caching untuk meningkatkan performa, terutama untuk transkrip dan perhitungan IPK:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hitungIPK</span><span class="hljs-params">()</span>
</span>{
    $mahasiswaId = <span class="hljs-keyword">$this</span>-&gt;id;
    
    <span class="hljs-keyword">return</span> Cache::remember(<span class="hljs-string">'ipk_mahasiswa_'</span> . $mahasiswaId, now()-&gt;addMinutes(<span class="hljs-number">60</span>), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> <span class="hljs-title">use</span> <span class="hljs-params">($mahasiswaId)</span> </span>{
        $mahasiswa = Mahasiswa::findOrFail($mahasiswaId);
        
        <span class="hljs-comment">// Hitung IPK seperti biasa</span>
        $mataKuliahs = $mahasiswa-&gt;mataKuliahs()
                                -&gt;wherePivot(<span class="hljs-string">'status'</span>, <span class="hljs-string">'selesai'</span>)
                                -&gt;get();
        
        <span class="hljs-comment">// Perhitungan IPK</span>
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-keyword">return</span> $ipk;
    });
}
</div></code></pre>
<h2 id="kesimpulan">Kesimpulan</h2>
<p>Pada praktik ini, kita telah mengimplementasikan relasi Many-to-Many antara Mahasiswa dan Mata Kuliah dengan fitur-fitur yang komprehensif. Kita telah menerapkan pembuatan migrasi, model, controller, view, dan fitur-fitur tambahan seperti perhitungan IPK, transkrip nilai, dan manajemen mata kuliah.</p>
<p>Dengan implementasi ini, aplikasi manajemen data Mahasiswa kita dapat menangani berbagai kebutuhan terkait akademik seperti pengambilan mata kuliah, input nilai, perhitungan IPK, dan pembuatan transkrip. Semuanya diimplementasikan dengan memanfaatkan relasi Many-to-Many yang kuat di Laravel.</p>
<p>Pengembangan lebih lanjut bisa dilakukan dengan menambahkan fitur-fitur seperti KRS online, persetujuan pengambilan mata kuliah oleh dosen wali, atau integrasi dengan sistem lain seperti pembayaran biaya kuliah.</p>

</body>
</html>
